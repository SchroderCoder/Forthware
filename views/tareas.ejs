<%- include('includes/head.ejs') %>
<%- include('includes/nav.ejs') %>     
<%- include('includes/sidebar.ejs') %>   

<h1 class=" py-2 pl-2 font-weight-bold">Tareas</h1>
<% if (tareas.length > 0) { %>
    <div class="container text-center">
        <div class="row bg-success text-white m-2 rounded">
            <div class="col">
                Fecha de creación
            </div>
            <div class="col-5">
                Descripción
            </div>
            <div class="col">
                Duración
            </div>
            <div class="col" >
                Nombre de proyecto
            </div>
            <div class="col ">
                Acciones
            </div>
        </div>
        <div class="row">
            <div class="col-sm over list-group-item">
                <div class="overflow-auto anyClass" style="height: 28rem !important;">
                    <% for (let  t of tareas) { %>
                        <!-- <a href="/tareas/editarTarea/<%= t.id_tarea %>"> -->
                            <input type="hidden" name="_csrf" id="_csrf" value="<%= csrfToken %>" >
                            <div class="row bg-light text-dark m-1 mt-2 border rounded">
                                <div class="col border-right border-dark">
                                    <%=  new Date(t.fecha_creacion).toLocaleDateString("ES-mx") %>
                                </div>
                                <div class="col-5 border-right border-dark">
                                    <a type="button" id="<%= t.id_tarea %>" data-toggle="modal" data-target="#exampleModal" onclick = "mostrartarea(id)"><%=  t.descripcion %></a>
                                </div>
                                <div class="col border-right border-dark">
                                    <%=  t.duracion.toFixed(1) %>
                                </div>
                                <div class="col border-right border-dark">
                                    <%=  t.nombre %>
                                </div>
                                <div class="col ">
                                    <span class="material-symbols-outlined">
                                    <a href="/tareas/editarTarea/<%= t.id_tarea %>"  >
                                        <button class = "btn btn-primary" > <i class="material-icons" >edit</i> </button>
                                        
                                    </a>
                                    </span>
                                    <button  class = "btn btn-danger" id="<%= t.id_tarea %>" type="button" class="bi bi-trash" data-toggle="modal" data-target="#exampleModal" onclick = "eliminartarea(id)" ><i class="material-icons" >delete</i></button>
                                        
                                </div>
                            </div>
                    <% } %>
                </div>
            </div>
        </div>
<% } else { %>
    <h2>No hay tareas registradas</h2>
<% } %>  
</div>

<div>
    <a href="/tareas/crearTarea">
        <button type="button" class="btn btn-primary mx-auto d-block mt-2" >
            Crear
        </button>
    </a>
</div>

<div id = "modal">
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content" id="modal_contenido">
            </div>
        </div>
    </div>
</div>

<script src="/js/eliminartarea.js"> </script>
<script src="/js/mostrartarea.js"> </script>

<%- include('includes/foot.ejs') %>